# 接口文档

**方式**：http

**域名**：api.inaction.fun

> 若无特殊说明，请求和返回数据都是 json 格式

## 注册

**url：**/register

**方法：** post

**参数：**

json格式

| key      | 类型   | 说明 |
| -------- | ------ | ---- |
| account  | string | 账号 |
| password | string | 密码 |
| name     | string | 名称 |

**返回数据：**

| 状态码 | 数据                 | 说明       |
| ------ | -------------------- | ---------- |
| 200    | {"msg":"ok"}         | 成功       |
| 409    | {"msg":"账号已存在"} | 账号已存在 |

## 登录

**url：**/login

**方法：** post

**参数：**

json格式

| key      | 类型   | 说明 |
| -------- | ------ | ---- |
| account  | string | 账号 |
| password | string | 密码 |

**返回数据：**

| 状态码 | 数据                 | 说明       |
| ------ | -------------------- | ---------- |
| 200    | {"msg":"ok"}         | 成功       |
| 404    | {"msg":"账号不存在"} | 账号不存在 |
| 409    | {"msg":"密码错误"}   | 密码错误   |

## 登出

**url：** /logout

**方法：** get

## 创建项目

**url：** /new/project

**方法：** post

**请求参数：**

json格式

| key     | 类型     | 说明                   |
| ------- | -------- | ---------------------- |
| name    | string   | 项目名                 |
| members | json数组 | 项目成员（不包括组长） |

**members**

| key        | 类型   | 说明                           |
| ---------- | ------ | ------------------------------ |
| account    | string | 成员的账号                     |
| permission | int    | 权限，0代表只读，1代表可读可改 |

**返回数据：**

| 状态码 | 数据                                                         | 说明                                                         |
| ------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 200    | {"projectId":"项目id"}                                       | 成功，并返回项目id                                           |
| 404    | {<br/>"projectId":"项目id",<br/>"notFound":["不存在的成员账号1","账号2"]<br/>} | 某些成员账号不存在，此时创建项目成功，但是某些成员未加入项目 |

## 添加项目成员

**url：** /new/project_member

**方法：** post

**请求参数：**

| key        | 类型   | 说明                           |
| ---------- | ------ | ------------------------------ |
| projectId  | string | 项目id                         |
| account    | string | 成员的账号                     |
| permission | int    | 权限，0代表只读，1代表可读可改 |

**返回数据：**

| 状态码 | 数据                           | 说明                 |
| ------ | ------------------------------ | -------------------- |
| 200    | {"msg":"ok"}                   | 成功                 |
| 404    | {"msg":"用户账号或项目不存在"} | 成员账号或项目不存在 |
| 409    | {"msg":"不能重复加入"}         | 该用户已是项目成员   |

## 修改项目成员权限

**url：** /update/member/permission

**方法：** post

**请求参数：**

| key        | 类型   | 说明                           |
| ---------- | ------ | ------------------------------ |
| projectId  | string | 项目id                         |
| account    | string | 成员的账号                     |
| permission | int    | 权限，0代表只读，1代表可读可改 |

**返回数据：**

| 状态码 | 数据                   | 说明                                                       |
| ------ | ---------------------- | ---------------------------------------------------------- |
| 200    | {"msg":"ok"}           | 成功                                                       |
| 405    | {"msg":"client error"} | 失败，可能由发送请求者非项目组长或成员不属于项目等原因造成 |

## 获取用户信息

**url：** /user/data

**方法：** get

**返回参数：**

```json
{
    "name": "用户名称",
    "account": "用户账号",
    "project": [
        {
            "id": "项目id",
            "name": "项目名",
            "leaderAccount": "组长账号",
            "leaderName": "组长名称",
            "members": [
                {
                    "account": "成员的账号",
                    "name": "成员的昵称",
                    "permission": "权限（0或1）"
                }
             ]
        }
    ]
}
```

